# Разные вспомогательные скрипты

Это примеры скриптов, которые нужно модифицировать переменные в каждом конкретном случае использования


## Вывод CSV-файлов

### [csv2step.sh](csv2step.sh)

Примерный Bash-скрипт, который переводит csv-файл (переменная `nameFileCSV`) в таблицу-лесенку. 

Переменная `CSVseparator` -- разделитель полей в csv-файле.

Например, стандартный csv:

```
Дата;Время;Систоличкское;Диастолическое;Пульс;Заметка
2021-06-02;09:25;136;86;64;г-ка Шишонина
```
Вывод этой таблицы лесенкой

```
Дата
 Время
  Систоличкское
   Диастолическое
    Пульс
     Заметка
2021-06-02
 09:25
  136
   86
    64
     г-ка Шишонина
```
Скрипт будет неправильно работать в случае, если в поле CSV-файла будут по каким-то причинам находиться символы переноса строки, разделитель полей CSV. И  скрипт требует, по идее, предварительной проверки или замены этих символов.


### [csv2table.sh](csv2table.sh)

Примерный Bash-скрипт, который переводит csv-файл в форматированную таблицу.

Изменять переменные:  
`nameFileCSV` -- csv-файл  
`table_format` -- строка спецификаторов для printf  
`CSVseparator` -- разделитель полей в csv-файле

Например, стандартный csv:

```
2021-01-03;11:00;136;84;74;г-ка Шишонина
...
```

Вывод этой таблицы в форматированную таблицу

```
$ ./csv2table.sh 
| 2021-01-03 | 11:00 | 136 | 84 | 74 | г-ка Шишонина |
| 2021-01-06 | 11:00 | 130 | 84 | 78 | г-ка Шишонина |
| 2021-01-07 | 10:00 | 156 | 84 | 74 |
| 2021-01-09 | 11:00 | 140 | 88 | 80 | г-ка Шишонина |
| 2021-01-12 | 11:00 | 144 | 82 | 70 | г-ка Шишонина |
| 2021-01-15 | 11:00 | 140 | 82 | 70 | 
```
Скрипт будет неправильно работать в случае, если в поле CSV-файла будут по каким-то причинам находиться символы переноса строки, разделитель полей CSV. И  скрипт требует, по идее, предварительной проверки или замены этих символов.


## Экспорт CSV-файлов

### [csv2html.sh](csv2html.sh)

Примерный Bash-скрипт, который переводит csv-файл (переменная `nameFileCSV`) в html-таблицу.

Переменная `CSVseparator` -- разделитель полей в csv-файле.

    $ csv2html.sh > myhtmltable.html
    
Скрипт будет неправильно работать в случае, если в поле CSV-файла будут по каким-то причинам находится символы переноса строки, разделитель полей CSV. И  скрипт требует, по идее, предварительной проверки или замены этих символов.


## Проверка формата CSV-файлов

Невозможно создать алгоритм, который сможет правильно прочитать строку в CSV-файле в случае, если в поле CSV-файла будут по каким-то причинам находится символы переноса строки, разделитель полей CSV. Проверка на правильность формата CSV должна происходить при формированиии поля и при последующей записи в файл.


### [checkFormatCSV.sh](checkFormatCSV.sh)

**checkFormatCSV.sh** -- это примерная функция Bash для проверки и замены служебных символов для поля формата CSV.
* Меняет разделитель полей CSV (обычно "," или ";") на другой символ
* Меняет символ `"` на `'`, если есть
* Меняет символ "\n" на "\u000A"

Требует три позиционных параметра:
* `$1` - строка поля CSV-файла
* `$2` - разделитель полей CSV-файла
* `$3` - замена для разделителя полей CSV-файла

Скрипт содержит объявление функции `checkFormatCSV` и пример её использования


## Проверка типов данных в полях CSV-файлов

В CSV-файлах можно организовать и типы данных, превращая CSV  в подобие электронных таблиц или БД. Это такие типы данных как число, строка, дата, время, деньги.  Например, можно в скриптах для создания CSV-файлов организовать проверку типов вводимых данных перед записью строки CSV в файл.


### [checkDigit.sh](checkDigit.sh)

**checkDigit** -- это примерная функция Bash для проверки являются ли данные числом
* врзвращает TRUE или FALSE
* проверяет:
  * целые положительные и отрицательные числа
  * числа с точкой или запятой
  * числа в научной нотации (экспоненциальная запись) 

Требует один позиционный параметр
* `$1` - переменная для поля CSV-файла

Скрипт содержит объявление функции `checkDigit` и пример её использования


### [checkLenStr.sh](checkLimStr.sh)

**checkLenStr** -- это примерная функция Bash для проверки длины строки

Принимает два позиционных параметра
* `$1` -- строка
* `$2` -- лимит длины строки
* врзвращает TRUE если строка БОЛЬШЕ числа длины

Скрипт содержит объявление функции `checkLimStr` и пример её использования


### [checkDate.sh](checkDate.sh)

**checkDate** -- это примерная функция Bash для проверки даты на коректность формата и календарное соответствие
 
Вызов функции:

    checkDate строка_даты [строка_формата_даты]

Принимает аргументы:
* `$1` -- проверяемая строка даты
* `$2` -- строка формата даты

Возвращает TRUE или FALSE

По умолчанию предполагается строка формата ISO 8601 `"Y-m-d"`, аргумент которого можно не указывать

    checkDate "2004-02-29"
    
Следующие строки формата даты нужно обязательно указывать в качестве аргумента:

**"Y/m/d"**

    checkDate "2004/02/29" "Y/m/d"

Скрипт содержит объявление функции `checkDate` и пример её использования
